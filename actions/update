#!/usr/bin/env python3

import os
import sys
from charmhelpers.core import hookenv
sys.path.insert(0, os.path.join(os.environ['CHARM_DIR'], 'lib'))
from charms.layer.weebl.constants import WEEBL_PKG
from charms.layer.weebl import utils
from charmhelpers.core import hookenv

hooks = hookenv.Hooks()


@hooks.hook("update")
def update():
    """ Update Weebl. """

    if utils.install_weebl(hookenv.config(), WEEBL_PKG):
        hookenv.action_set({"message": "Weebl update successful"})
        hookenv.log("Weebl update successful")
    else:
        hookenv.action_set({"message": "Weebl update failed"})
        hookenv.log("Weebl update failed")


if __name__ == "__main__":
    hooks.execute(sys.argv)
